var commit = require('commit');
var utils = require('utils');

function parseFile(sha1, repoPath, description) {
  describe(description, function(){
	it('correct file', function(done) {
		commit.readFileToCommit(sha1, repoPath, function(err, commit) {
				if (err)
				{
					done(err);
				}
				else if (utils.getSha1(commit.toFile()) != sha1)
				{
					done("Incorrect sha1");
				}
				else
				{
					done();
				}
			}
		);
	});

  });
}

exports.test = function () {
	var sha1 = '3178a5fb52db0d5d557fcb18474b662629846496';
	var repoPath = __dirname + '/git1/';
	parseFile(sha1, repoPath, '#1 - parsing commit without parent');
	
	sha1 = 'f87f2c522175fe22d9f6a7d75d4c91831a1f8cbc';
	parseFile(sha1, repoPath, '#2 - parsing commit with parent');
};