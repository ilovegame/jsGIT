var tag = require('tag');
var utils = require('utils');

function parseFile(sha1, repoPath, description) {
  describe(description, function(){
	it('correct file', function(done) {
		tag.readFileToTag(sha1, repoPath, function(err, tag) {
				if (err)
				{
					done(err);
				}
				else if (utils.getSha1(tag.toFile()) != sha1)
				{
					done("Incorrect sha1");
				}
				else
				{
					done();
				}
			}
		);
	});

  });
}

exports.test = function () {
	var sha1 = '4f30cf21ed1357ae54c87e7822f2e9f7204d330c';
	var repoPath = __dirname + '/git1/';
	parseFile(sha1, repoPath, '#1 - parsing tag');
};